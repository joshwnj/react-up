#!/usr/bin/env node

const path = require('path');
const argv = require('minimist')(process.argv.slice(2));

if (!argv._[0]) {
  console.error('Usage: react-up $FILENAME');
  process.exit();
}

const port = process.env.PORT || argv.port || 8000;
const filename = path.resolve(argv._[0]);
const cssPath = argv.css ? path.resolve(argv.css) : null;

const opts = {
  cssPath: cssPath,
  inStream: process.stdin,
  port: port
};

require('../')(filename, opts, function (err) {
  if (err) {
    console.error(err);
    process.exit();
  }

  if (!argv.s) {
    console.log('Ready at http://localhost:%d', port);
  }
});
